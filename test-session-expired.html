<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Sess√£o Expirada</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1e293b;
            color: white;
            padding: 20px;
        }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            font-size: 16px;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .info {
            background: #1e40af;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .success {
            background: #059669;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .error {
            background: #dc2626;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste - Sess√£o Expirada</h1>
    
    <div class="error">
        <h3>üö® Erro Detectado:</h3>
        <p><strong>"Error validating access token: Session has expired"</strong></p>
        <p>Este √© o erro que est√° aparecendo no console e que deve acionar o modal.</p>
    </div>
    
    <div class="success">
        <h3>‚úÖ Corre√ß√µes Implementadas:</h3>
        <ul>
            <li>‚úÖ Detec√ß√£o de "Session has expired"</li>
            <li>‚úÖ Detec√ß√£o de "access token"</li>
            <li>‚úÖ Detec√ß√£o de "token expired"</li>
            <li>‚úÖ Detec√ß√£o de "authentication"</li>
            <li>‚úÖ Detec√ß√£o de "permission"</li>
            <li>‚úÖ Modal deve aparecer automaticamente</li>
        </ul>
    </div>
    
    <div class="info">
        <h3>üìã Como testar:</h3>
        <ol>
            <li>Clique no bot√£o "Simular Sess√£o Expirada"</li>
            <li>Verifique se o modal aparece com tema dark</li>
            <li>Confirme se a mensagem de erro est√° correta</li>
            <li>Teste o bot√£o de reconex√£o</li>
        </ol>
    </div>

    <button class="test-button" onclick="simulateSessionExpired()">
        üîí Simular Sess√£o Expirada
    </button>
    
    <button class="test-button" onclick="simulateAccessTokenError()">
        üîë Simular Erro de Access Token
    </button>

    <button class="test-button" onclick="simulateAuthenticationError()">
        üõ°Ô∏è Simular Erro de Autentica√ß√£o
    </button>

    <button class="test-button" onclick="simulatePermissionError()">
        üîê Simular Erro de Permiss√£o
    </button>

    <script>
        // Simular erro de sess√£o expirada (erro real que est√° ocorrendo)
        function simulateSessionExpired() {
            const event = new CustomEvent('metaAdsRateLimit', {
                detail: {
                    message: 'Error validating access token: Session has expired. The current time is Monday, 18-Aug-25 17:01:43 PDT.',
                    timestamp: Date.now(),
                    service: 'MetaAdsService'
                }
            });
            window.dispatchEvent(event);
            
        }

        // Simular erro de access token
        function simulateAccessTokenError() {
            const event = new CustomEvent('metaAdsRateLimit', {
                detail: {
                    message: 'Invalid access token provided',
                    timestamp: Date.now(),
                    service: 'MetaAdsService'
                }
            });
            window.dispatchEvent(event);
            
        }

        // Simular erro de autentica√ß√£o
        function simulateAuthenticationError() {
            const event = new CustomEvent('metaAdsRateLimit', {
                detail: {
                    message: 'Authentication failed. Please reconnect your account.',
                    timestamp: Date.now(),
                    service: 'MetaAdsService'
                }
            });
            window.dispatchEvent(event);
            
        }

        // Simular erro de permiss√£o
        function simulatePermissionError() {
            const event = new CustomEvent('metaAdsRateLimit', {
                detail: {
                    message: 'Permission denied. Insufficient permissions for this action.',
                    timestamp: Date.now(),
                    service: 'MetaAdsService'
                }
            });
            window.dispatchEvent(event);
            
        }

        // Log quando a p√°gina carrega
        
        
        
    </script>
</body>
</html>
